# 2025-datathon
https://lovable.dev/projects/6dd224d2-3e59-44e3-abb5-7b46506ff2b7

# 🥗 연령별 영양 격차 기반 맞춤 식단 최적화 웹 서비스

권장 영양 기준과 실제 섭취 데이터를 정량 비교하여  
영양 개입 효과가 가장 큰 연령 집단을 선정하고,  
급식·재료·영양 목표를 동시에 만족하는 **최적 식단을 자동 생성**하는 웹 서비스

---

## 📌 프로젝트 개요

본 프로젝트는 **데이터 기반 의사결정**을 핵심 원칙으로 한다.  
단순한 건강식 추천이 아니라, **연령별 권장 섭취량과 실제 섭취량의 격차를 정량화**하여  
식단 개입 효과가 가장 큰 타깃 집단을 선정하고 이를 위한 **영양 최적화 추천 시스템**을 구축하였다.

---

## 🧠 문제 인식

기존 식단 추천 서비스의 한계:

- 연령·성별 기준이 경험적
- 영양 부족이 수치로 검증되지 않음
- 현실적인 식사 구조 반영 부족

본 프로젝트는 다음 질문에서 출발하였다.

> **“누구에게 이 서비스가 가장 필요한가?”**

---

## 📊 데이터 파이프라인 및 인사이트 도출

### 1️⃣ 데이터 수집

| 데이터 | 내용 |
|------|------|
| 권장 영양 기준 | 2020 한국인 영양섭취기준 (KDRIs) |
| 실제 섭취 데이터 | 연령·성별 평균 영양소 섭취량 |
| 급식 데이터 | NEIS 학교 급식 영양 정보 |
| 식품 영양 데이터 | 음식별 영양소·칼로리 DB |

---

### 2️⃣ 분석 전략 설계

- 타깃 선정은 **추측이 아닌 수치**로 결정
- 모든 영양소에 대해 다음 비율 계산

\[
비율 = \frac{실제 섭취량}{권장 섭취량}
\]

- 연령·성별·영양소 전반의 **격차 구조 시각화**

---

### 📈 시각화 파이프라인

- 절대량 막대그래프: 섭취량 vs 기준
- 기준 대비 비율 개선선 그래프 중첩
- 과잉(빨강), 부족(파랑) 시각 강조
- 전 연령대·영양소 비교 가능한 구조 구축

---

## 🎯 핵심 인사이트 및 타깃 피벗

### 초기 가설
- 고령층

### 데이터 분석 결과

- **10대(청소년) 구간에서 가장 심각한 영양 불균형 발생**
- 단백질·칼슘·철분 부족
- 나트륨·당류 과다
- 영양소 전반의 격차 폭 최대

➡️ **타깃을 노인 → 10대로 전략 수정**

> 이 전환은 직관이 아니라 **데이터에 의한 결정**이다.

---

## 🧩 10대 맞춤 서비스 구조 재설계

### 현실 제약 반영
- 10대의 점심 식사는 대부분 **학교 급식으로 고정**

### 서비스 구조

1. 학교·날짜 기반 급식 데이터 자동 수집  
2. 급식 섭취 영양 계산  
3. 하루 권장량 − 급식 섭취량 = **잔여 필요 영양량**  
4. 잔여 영양량 기반 **저녁·다음날 아침 식단 최적화**

---

## ⚙️ 식단 최적화 엔진

### 문제 재정의
> 제한된 재료로 목표 영양소에 가장 근접하면서  
> 현실적인 식사 구조를 만족하는 식단 구성

### 사용 기법
- **정수 선형계획법 (Integer Linear Programming)**

---

### 결정 변수

| 변수 | 의미 |
|----|----|
| \( z_i \) | 음식 선택 여부 |
| \( y_i \) | 인분 수 (0.5 단위 정수) |
| \( x_i \) | 실제 인분 크기 |
| \( u_k, v_k \) | 영양소 부족·초과 오차 |

---

### 목적 함수

영양 오차 최소화:

\[
\sum_k w_k (u_k + 1.5v_k)
\]

---

### 핵심 제약 조건

- 주식 1종 고정
- 단백질 0.5~1.5 인분
- 채소 최소 0.5 인분
- 김치 필수
- 반찬 수 ≤ 6
- 가용 재료만 사용
- 금지 식품·알레르기 반영

---

## 🌐 웹 서비스 구현

| 구성 | 내용 |
|----|----|
| 백엔드 | Python + 최적화 엔진 |
| DB | SQL 기반 식품 영양 DB |
| API | NEIS 급식 데이터 연동 |
| 프론트엔드 | 사용자 입력 UI |
| 추천 엔진 | 실시간 식단 생성 |

**사용자 입력:**  
학교 정보 · 집에 있는 재료 · 금지 식품

**출력:**  
👉 급식에 맞춰 자동 조정된 하루 식단

---

## 🛠️ 개발 과정의 문제와 해결

### 1️⃣ 타깃 설정 충돌
- 노인 가설 ↔ 데이터 결과 충돌  
→ **데이터 기준으로 전략 수정**

### 2️⃣ 급식 데이터 불안정
- 문자열 형태 영양 데이터 파싱 오류  
→ **정규식 기반 파서 구축**

### 3️⃣ 비현실적 식단 출력
- 영양 수치만 맞춘 식단 생성  
→ **식단 역할군 제약 추가**

---

## ✅ 프로젝트 성과

- 전 과정 **데이터 기반 의사결정**
- 식단 추천 문제의 **최적화 문제화**
- 현실 제약을 반영한 추천 시스템 구현
- 분석 → 인사이트 → 알고리즘 → 서비스의 일관된 구조

---

## 🧰 기술 스택

- Python
- Pandas / Matplotlib
- PuLP (최적화)
- SQL
- NEIS Open API
- Flask / FastAPI
